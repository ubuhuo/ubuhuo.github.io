---
title: ThinkPHP5 + 梦网实现手机验证码登陆后台逻辑
date: 2018/5/15
categories:
  - 编程框架
  - ThinkPHP
tags:
  - TP5 手机验证码登陆后台逻辑
copyright: true
---

## 前言

之前一直挺好奇各个大平台怎么实现手机验证码登陆的，前几天手痒就尝试着通过 `ThinkPHP` 和梦网云通讯的短信 `API` 实现了一下服务器端的逻辑，功能实现很简单，不过还是有几个坑存在因此写下这篇文章记录一下。

本文记录了本人此次尝试的全部思路，比较冗长，提前劝退各位已经熟悉此类操作的大佬，当然如果有大佬愿意检查我的思路过程并指出其中不足我还是很欢迎的。

## 准备

### 1. 模拟服务器环境准备

我是用自己的笔记本来码的代码因此需要做一些前期的模拟服务器准备，不过由于我之前一直在写 `PHP` 所以环境早就搭建好了也不想在赘述过程了，具体环境信息如下：
`PHPStudy: PHP 7 + MySQL + Apache`
`IDE: PHPStrom`

### 2. 短信验证码服务准备

我简单的搜索了一下并尝试了几个别人说还不错的产品最后选择了梦网云通讯，原因有两个：注册简单，能免费体验。

需要准备的东西有：认证后的账号一个，上线的梦网短信发送账号一个（登录后在控制台的业务中心自己开启），`PHP API` 文件一份（官网开发者中心下载）

### 3. 部署好的 ThinkPHP5 代码
我使用的是 `v5.0.20` 而不是最新的 `v5.1` 分支因为之前写的项目都是基于 `5.0` 开发的所以比较熟悉，为了降低时间成本就延续用了。

将下载好的代码放到开发目录下就可以开始准备开发了~

## 开发

开发分为两部分：发送验证码和验证验证码

### 发送验证码开发流程图

![发送验证码开发流程图][1]

### 验证验证码开发流程图

![验证验证码开发流程图][2]

[1]: https://img.blanc.site/wiki/img/6.png
[2]: https://img.blanc.site/wiki/img/7.png

## 源码

源码已经被我删了，有问题直接问我吧。