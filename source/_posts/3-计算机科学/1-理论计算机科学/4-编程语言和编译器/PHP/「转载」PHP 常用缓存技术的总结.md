---
title: 「转载」PHP 常用缓存技术的总结
date: 2018/5/12
categories:
  - 3-计算机科学
  - 1-理论计算机科学
  - 4-编程语言和编译器
  - PHP
copyright: true
---

1、全页面静态化缓存：将页面全部生成为 `HTML` 静态页面，用户访问时直接访问静态页面，不走 `PHP` 服务器的解析流程。此种方式在 `CMS` 系统中比较常见，如 `dedecms`。
实现方法：输出缓存

| 操作        |效果       |  
| :--------: | :------: |
| ob_start() |   打开“输出控制缓冲” |
| some code  |   要运行的代码 |
| $content = ob_get_contents() |   返回“输出缓冲区的内容” |
| some code |   使用 file_put_contents() 等函数将返回的数据写入 HTML 文件 |
| ob_clearn() |   清空“输出缓冲区” |

2、页面部分缓存：将页面中不常变动的部分进行静态化缓存，而经常变化的部分不缓存，最后组装在一起显示；可以使用类似 `ob_get_contents()` 的方式实现，也可以利用类似 `ESI` 之类的页面片段缓存策略，使其用来做动态页面中相对静态的片段部分的缓存。该缓存方式常用与商城中的商品页。

3、数据缓存：缓存数据的一种方式。比如，商城中的某个商品信息，当用商品 `ID` 去请求时，就会得出包括店铺信息、商品信息等数据，此时就可以将这些 数据缓存到一个 `PHP` 文件中，文件名包含商品 `ID` 来建一个唯一标示；下一次有人想查看这个商品时，首先就直接调这个文件里面的信息，而不用再去数据库查 询；其实缓存文件中缓存的就是一个 `PHP` 数组之类；`Ecmall` 商城系统里面就用了这种方式；

4、查询缓存：根据查询来进行缓存。将查询得到的数据缓存在一个文件中，下次遇到相同的查询时，就直接先从这个文件里面调数据，不再去查数据库；但此处的缓存文件名可能就需要以查询语句为基点来建立唯一标示。

注意：以上几种缓存方式都需要对缓存的文件设置一个有效时间，在这个时间内，相同的访问会先取缓存文件的内容，超过有效时间后就重新从数据库中获取数据，并生成新的缓存文件。

5、内存式缓存：使用 `Redis`、`Memcached` 等 `NoSQL` 数据库设置 `PHP` 缓存，通过缓存查询结果，来减少数据库的访问次数，从而提高网站的响应速度。

6、`Apache` 缓存模块： `Apache` 安装完以后，是不允许被 `cache` 的。如果外接了` cache` 或 `squid` 服务器要求进行 `Web` 加速的话，就需要在 `htttpd.conf` 里进行设置，当然前提是在安装 `Apache` 的时候要激活 `mod_cache` 的模块。
安装 `apache` 时：`./configure –enable-cache –enable-disk-cache –enable-mem-cache`

7、`PHP APC` 缓存扩展：使用 `PHP` 中的 `APC` 扩展来进行缓存

8、`Opcode`：首先 `PHP` 代码被解析为 `Tokens` ，然后再编译为 `Opcode` 码，最后执行 `Opcode` 码，返回结果；所以，对于相同的 `PHP` 文件，第一次运行时 可以缓存其 `Opcode` 码，下次再执行这个页面时，直接会去找到缓存下的 `Opcode` 码，直接执行最后一步，而不再需要中间的步骤了。比较知名的是 `XCache,Turck MM Cache ,PHP Accelerator` 等。关于 `PHP Opcode`，鸟哥的博客中有一篇详解：http://www.laruence.com/2008/06/18/221.html

[原文地址](https://blog.csdn.net/ym_diver/article/details/74078190)